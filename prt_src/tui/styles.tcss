/* PRT Textual Application Styles
 * Dark theme with clear mode indicators
 */

/* Global styles */
Screen {
    background: $surface;
}

/* Header styling with mode indicator */
Header {
    background: $primary;
}

Header.edit-mode {
    background: $warning;
}

/* Main container */
#main-container {
    padding: 1;
    width: 100%;
    height: 100%;
    overflow: auto;
}

/* Welcome message */
#welcome {
    content-align: center middle;
    text-style: bold;
    color: $text;
}

/* Footer with keybinding hints */
Footer {
    background: $panel;
}

/* Mode indicators */
.mode-indicator {
    dock: right;
    width: 10;
    content-align: center middle;
    background: $accent;
    color: $text;
}

.mode-indicator.navigation {
    background: $success;
}

.mode-indicator.edit {
    background: $warning;
}

/* Status bar */
.status-bar {
    dock: bottom;
    height: 1;
    background: $panel;
    color: $text-muted;
}

/* Selection counter */
.selection-count {
    dock: left;
    width: 20;
    content-align: left middle;
    padding: 0 1;
}

/* Help hints */
.help-hints {
    dock: right;
    width: 40;
    content-align: right middle;
    padding: 0 1;
}

/* Toast notifications */
.toast {
    dock: top;
    layer: notification;
    width: auto;
    height: 3;
    padding: 1;
    margin: 1;
    border: round;
    opacity: 0.95;
}

.toast.info {
    background: $primary;
    color: $text;
}

.toast.success {
    background: $success;
    color: $text;
}

.toast.error {
    background: $error;
    color: $text;
}

.toast.warning {
    background: $warning;
    color: $text;
}

/* Confirm dialog */
.confirm-dialog {
    layer: dialog;
    width: 60;
    height: auto;
    padding: 2;
    margin: 4 8;
    background: $panel;
    border: thick $primary;
}

#dialog-content {
    width: 100%;
    height: auto;
}

#dialog-message {
    width: 100%;
    height: auto;
    margin-bottom: 2;
    text-align: center;
}

#dialog-buttons {
    width: 100%;
    height: 3;
    align: center middle;
}

#dialog-buttons Button {
    margin: 0 1;
    width: 16;
}

#confirm-btn.dangerous {
    background: $error;
}

/* Mode-aware widget states */
.navigation {
    border: solid $success;
}

.edit {
    border: solid $warning;
}

/* Contact List */
.contact-list {
    width: 100%;
    height: 100%;
}

#contact-scroll {
    width: 100%;
    height: 100%;
    border: round $primary;
}

.contact-row {
    width: 100%;
    height: auto;
    padding: 0 1;
    margin: 0;
}

.contact-row.selected {
    background: $primary;
}

.contact-row-content {
    width: 100%;
    padding: 1 0;
}

.contact-name {
    text-style: bold;
    color: $text;
}

.contact-info {
    color: $text-muted;
    margin-top: 0;
}

/* Contact Detail View */
.contact-detail {
    width: 100%;
    height: 100%;
    padding: 1;
}

#detail-header {
    width: 100%;
    height: 3;
    margin-bottom: 1;
}

.detail-title {
    text-style: bold;
    color: $text;
}

#detail-actions {
    dock: right;
}

.action-button {
    margin-left: 1;
}

#fields-container {
    width: 100%;
    height: auto;
}

.field-container {
    width: 100%;
    height: auto;
    margin-bottom: 1;
}

.field-label {
    text-style: bold;
    color: $text-muted;
    margin-bottom: 0;
}

.field-value {
    color: $text;
    padding: 1;
    background: $panel;
    border: round $border;
}

.field-input {
    width: 100%;
}

/* Search Bar */
.search-bar {
    width: 100%;
    height: 3;
    margin-bottom: 1;
}

.search-container {
    width: 100%;
}

.search-input {
    width: 1fr;
}

.search-button, .clear-button {
    margin-left: 1;
}

/* Filter Panel */
.filter-panel {
    width: 30%;
    min-width: 25;
    max-width: 40;
    height: 100%;
    border: round $primary;
    padding: 1;
    overflow-y: auto;
}

.filter-title {
    text-style: bold;
    margin-bottom: 1;
}

.filter-list {
    height: 1fr;
    overflow-y: auto;
}

.filter-item {
    padding: 0 1;
    margin: 0;
    background: $panel;
    border: round $border;
    margin-bottom: 1;
}

.clear-filters-button {
    dock: bottom;
    margin-top: 1;
}

/* Searchable List */
.searchable-list {
    width: 100%;
    height: 100%;
}

.content-area {
    width: 100%;
    height: 1fr;
}

.items-list {
    width: 1fr;
    height: 100%;
    padding: 0 1;
    overflow-y: auto;
}

.search-item {
    padding: 1;
    margin-bottom: 1;
    background: $panel;
    border: round $border;
}

.search-status {
    dock: bottom;
    height: 1;
    padding: 0 1;
    background: $panel;
    color: $text-muted;
}

/* Navigation Menu */
.navigation-menu {
    width: 100%;
    height: auto;
    max-height: 70vh;
    padding: 1;
    overflow-y: auto;
}

.menu-container {
    width: 100%;
    height: auto;
    overflow-y: auto;
}

.menu-item {
    padding: 1 2;
    margin: 0 0 1 0;
    background: $panel;
    border: round $border;
    color: $text;
}

.menu-item.selected {
    background: $primary;
    border: round $accent;
    text-style: bold;
}

.menu-item.current {
    background: $success-darken-1;
    border: round $success;
}

.menu-item.disabled {
    opacity: 0.5;
    color: $text-muted;
}

.menu-item:hover {
    background: $primary-lighten-1;
}

/* Screen Base Styles */
.screen-placeholder {
    width: 100%;
    height: 100%;
    content-align: center middle;
    text-style: italic;
    color: $text-muted;
    padding: 2;
}

/* Screen-specific styles */
.screen-home {
    padding: 1;
}

.screen-contacts {
    padding: 0;
}

.screen-search {
    padding: 1;
}

.screen-relationships {
    padding: 1;
}

.screen-database {
    padding: 1;
}

.screen-metadata {
    padding: 1;
}

.screen-chat {
    padding: 0;
    background: $background;
}

/* Search Screen Styles */
.search-screen-container {
    width: 100%;
    height: 100%;
    padding: 1;
}

.search-content {
    width: 100%;
    height: 1fr;
    margin-top: 1;
}

/* Search Scope Filter */
.search-scope-filter {
    width: 25%;
    min-width: 20;
    max-width: 35;
    height: 100%;
    border: round $primary;
    padding: 1;
    margin-right: 1;
    overflow-y: auto;
}

.scope-filter-container {
    width: 100%;
    height: 100%;
}

.scope-title {
    text-style: bold;
    color: $text;
    margin-bottom: 1;
}

.scope-checkbox {
    margin-bottom: 1;
}

/* Search Result List */
.search-result-list {
    width: 1fr;
    height: 100%;
}

.result-list-container {
    width: 100%;
    height: 100%;
}

.results-scroll {
    width: 100%;
    height: 1fr;
    border: round $primary;
}

.results-content {
    width: 100%;
    padding: 1;
}

.result-section-header {
    text-style: bold;
    color: $accent;
    margin-bottom: 1;
    margin-top: 1;
    border-bottom: solid $border;
    padding-bottom: 0;
}

.result-item {
    padding: 1;
    margin-bottom: 1;
    background: $panel;
    border: round $border;
    color: $text;
}

.result-item.selected {
    background: $primary;
    border: round $accent;
    text-style: bold;
}

.section-spacer {
    height: 1;
    margin: 0;
}

.result-status {
    dock: bottom;
    height: 1;
    padding: 0 1;
    background: $panel;
    color: $text-muted;
    text-align: center;
}

.error-message {
    color: $error;
    text-style: italic;
    padding: 1;
    text-align: center;
}

/* Database Screen Styles */
.database-container {
    width: 100%;
    height: 100%;
    padding: 1;
}

.section-title {
    text-style: bold;
    color: $accent;
    margin-bottom: 1;
}

.stats-section, .backups-section, .actions-section {
    width: 100%;
    margin-bottom: 2;
}

.stats-table, .backups-table {
    width: 100%;
    height: auto;
    border: round $primary;
    margin-bottom: 1;
}

.action-buttons {
    width: 100%;
    height: auto;
}

.action-buttons Button {
    margin-right: 2;
    min-width: 16;
}

/* Chat Screen Styles */
.chat-container {
    width: 100%;
    height: 100%;
    background: $background;
    overflow: hidden;
}

.chat-log {
    width: 100%;
    height: 1fr;
    min-height: 10;
    border: none;
    padding: 1;
    margin-bottom: 1;
    background: $surface;
    overflow-y: auto;
    scrollbar-size: 1 1;
}

.chat-input-container {
    width: 100%;
    height: 3;
    align: left middle;
    padding: 0 1;
    background: $panel;
    border-top: solid $border;
}

.chat-input {
    width: 1fr;
    margin-left: 1;
}

.chat-loading {
    width: auto;
    height: 3;
    margin-right: 1;
    content-align: center middle;
}

/* Chat Message Styling - Applied via Rich markup in code */
.user-message {
    color: $text;
    margin-bottom: 1;
}

.assistant-message {
    color: $success;
    margin-bottom: 1;
}

.message-timestamp {
    color: $text-muted;
}

/* Chat input focus */
.chat-input:focus {
    border: solid $primary;
}

/* Exit Confirmation Overlay */
.exit-confirmation-overlay {
    layer: dialog;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
}

.confirm-center {
    width: 100%;
    height: 100%;
    align: center middle;
}

.confirm-content {
    width: 50;
    height: 10;
    background: $panel;
    border: thick $primary;
    padding: 2;
}

.confirm-title {
    text-style: bold;
    text-align: center;
    color: $text;
    margin-bottom: 1;
}

.confirm-message {
    text-align: center;
    color: $text;
    margin-bottom: 1;
}

.confirm-hint {
    text-align: center;
    color: $text-muted;
    text-style: italic;
}

/* Chat TUI Enhancements - GitHub Issue #106 */

/* Status bar styling */
.chat-status-bar {
    dock: top;
    height: 1;
    background: $panel;
    padding: 0 1;
}

.llm-status {
    text-style: bold;
    content-align: left middle;
}

.llm-status-online {
    color: $success;
}

.llm-status-offline {
    color: $error;
}

.llm-status-checking {
    color: $warning;
}

.llm-status-error {
    color: $error;
    text-style: bold;
}

/* Progress indicator styling - REMOVED (using RichLog instead) */

/* Chat log adjustments for new status bar */
.chat-log {
    margin-top: 1;
}