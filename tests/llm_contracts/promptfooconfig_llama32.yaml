description: 'PRT Chat - Test with llama3.2:3b model'

prompts:
  - file://system_prompt.txt

providers:
  - id: ollama:llama3.2:3b
    config:
      temperature: 0.1
      apiBaseUrl: http://localhost:11434/v1

defaultTest:
  options:
    provider: ollama:llama3.2:3b

# Quick subset of critical tests
tests:
  - description: 'Basic search'
    vars:
      user_message: 'show me all my contacts'
    assert:
      - type: is-json
      - type: javascript
        value: |
          const response = JSON.parse(output);
          return response.intent === 'search' &&
                 response.parameters.entity_type === 'contacts';

  - description: 'Search with filter'
    vars:
      user_message: 'find tech people'
    assert:
      - type: is-json
      - type: javascript
        value: |
          const response = JSON.parse(output);
          return response.intent === 'search' &&
                 response.parameters.filters?.tags?.includes('tech');

  - description: 'Select intent'
    vars:
      user_message: 'select 1, 2, 3'
    assert:
      - type: is-json
      - type: javascript
        value: |
          const response = JSON.parse(output);
          return response.intent === 'select' &&
                 response.parameters.selection_type === 'ids';

  - description: 'Export intent'
    vars:
      user_message: 'export to json'
    assert:
      - type: is-json
      - type: javascript
        value: |
          const response = JSON.parse(output);
          return response.intent === 'export' &&
                 response.parameters.format === 'json';

outputPath: './promptfoo_results_llama32.json'
